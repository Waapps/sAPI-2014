bettercms.define("bcms.newsletter",["bcms.jquery","bcms","bcms.siteSettings","bcms.dynamicContent","bcms.ko.extenders","bcms.ko.grid"],function(a,b,k,c,f,g){var i={},j={},h={loadSiteSettingsSubscribersUrl:null,loadSubscribersUrl:null,saveSubscriberUrl:null,deleteSubscriberUrl:null},d={deleteSubscriberDialogTitle:null};i.links=h;i.globalization=d;i.selectors=j;var l=(function(n){b.extendsClass(o,n);function o(p,r,q){n.call(this,p,h.loadSubscribersUrl,r,q);}o.prototype.createItem=function(p){var q=new m(this,p);return q;};return o;})(g.ListViewModel);var m=(function(n){b.extendsClass(o,n);function o(q,p){n.call(this,q,p);var r=this;r.email=f.observable().extend({required:"",email:"",maxLength:{maxLength:f.maxLength.email}});r.registerFields(r.email);r.email(p.Email);}o.prototype.getDeleteConfirmationMessage=function(){return a.format(d.deleteSubscriberDialogTitle,this.email());};o.prototype.getSaveParams=function(){var p=n.prototype.getSaveParams.call(this);p.Email=this.email();return p;};return o;})(g.ItemViewModel);function e(q){var n=k.getMainContainer(),o=(q.Success==true)?q.Data:{};var r=new l(n,o.Items,o.GridOptions);r.deleteUrl=h.deleteSubscriberUrl;r.saveUrl=h.saveSubscriberUrl;f.applyBindings(r,n.get(0));var p=n.find("input[type=text],textarea,select").filter(":visible:first");if(p){p.focus();}}i.loadSiteSettingsNewsletterSubscribers=function(){c.bindSiteSettings(k,h.loadSiteSettingsSubscribersUrl,{contentAvailable:e});};i.init=function(){b.logger.debug("Initializing bcms.newsletter module.");};b.registerInit(i.init);return i;});